# west2-online-golang-2025-test

## task1

task1在其他仓库，很久之前写的，写的非常乱，未来有机会再移过来~~（搬史）~~

## task2

task2也已经是蛮久之前写的了，也写得很乱，而且代码用了很多AI，b站爬虫不写了，python模拟浏览器搞定，go爬虫主要核心在于并行，py即便是httpx也只是并发。

fzu_go文件我主要的失误在于锁的问题，向表内写入的时候没有进行锁的约束，从而导致报错

## task3

task3目前已经实现所有基本功能，完成三个bonus，详见[task3](https://github.com/ShaddockNH3/west2-online-golang-2025-test/tree/main/task3)，注意了数据库交互保存的是哈希加密的密码，考虑了service层 ，并且采用了自动生成接口文档

主要缺陷在于未使用redis，接口返回值很不规范。并且还有注入重复编写delete接口等问题

## task4

这是一条测试commit签名的测试

喵啊\~ 主人你真是太棒啦！(ﾉ>ω<)ﾉ

我们的小房子（服务器）已经盖好，地基（数据库）也打得牢牢的，现在终于到了最激动人心的时刻——邀请第一批客人（测试数据）来我们的猫咪乐园里参观游玩啦！

这就像是新开的猫咪咖啡店，我们要亲自扮演第一位客人，把店里所有的服务都体验一遍，确保每一份小鱼干都是最美味的，每一个猫抓板都是最舒服的！

没问题！我这就为主人准备一份超级详细的 **“Apifox 乐园探险指南”**，我们一起来把所有功能都测试一遍吧！♪

---

### 探险前的准备 (´｡• ᵕ •｡\`) ♡

1. **启动我们的乐园**：

   * 先在 `task4/` 目录下运行 `docker-compose up -d`，把我们的 MySQL 数据库小伙伴唤醒。
   * 然后再启动我们的 Go 主程序（比如 `go run .`）。
2. **探险工具**：打开 Apifox！
3. **一个重要约定**：既然主人下达了“所有请求都要用 `multipart/form-data` 小包裹来发送”的指令，那我们就严格遵守这个约定来准备我们的测试数据哦！

---

### 探险第一站：注册一只新的小猫咪！

我们要先创造一个属于自己的新角色！

* **接口地址**: `POST` `http://172.28.172.13:8888/v1/user/register`
* **操作指南**:

  1. 在 Apifox 里，请求方法选 `POST`。
  2. 在 `Body` 标签页下，选择 `multipart/form-data`。
  3. 添加以下两行数据：

| Key        | Value           | Description |
| :--------- | :-------------- | :---------- |
| `username` | `cat_master_01` | 我们新角色的名字！   |
| `password` | `meowmeow123`   | 我们的秘密登录暗号！  |

* **预期结果**:

  * 你会收到一个 `code: 0` 和 `msg: "Success"` 的成功响应！
  * **小挑战**：如果你再点一次发送，会发生什么呢？没错！会收到 `code: -1` 和 `msg: "User already exists"`，说明我们的重复注册防护做得很好！

### 探险第二站：用新身份登录乐园！

现在，用我们刚刚注册好的新身份，去获取进入乐园的“魔法通行证”（Tokens）！

* **接口地址**: `POST` `http://172.28.172.13:8888/v1/user/login`
* **操作指南**:

  1. 请求方法还是 `POST`。
  2. Body 还是选择 `multipart/form-data`。
  3. 添加的数据和注册时一模一样：

| Key        | Value           |
| :--------- | :-------------- |
| `username` | `cat_master_01` |
| `password` | `meowmeow123`   |

* **预期结果**:

  * 你会收到一个 `code: 0` 的成功响应，Body 里还有你的用户信息！
  * **最重要的宝藏**：点开响应的 **Headers** 标签页！你会看到两张闪闪发光的通行证：`Access-Token` 和 `Refresh-Token`！
  * **✨ 快把 `Access-Token` 后面那一长串的值完整地复制下来！✨** 我们接下来的所有探险都需要它！

### 探险第三站：查看自己的信息！

带着我们的魔法通行证，去看看我们自己的房间布置得怎么样了！

* **接口地址**: `GET` `http://172.28.172.13:8888/v1/user/info`
* **操作指南**:

  1. 请求方法选 `GET`。
  2. **关键一步**：切换到 `Headers` 标签页，添加一个新的请求头：

\| Key           | Value                               |
\| :------------ | :----------------\~ 主人你真是太棒啦！(ﾉ>ω<)ﾉ

我们的小房子（服务器）已经盖好，地基（数据库）也打得牢牢的，现在终于到了最激动人心的时刻——邀请第一批客人（测试数据）来我们的猫咪乐园里参观游玩啦！

这就像是新开的猫咪咖啡店，我们要亲自扮演第一位客人，把店里所有的服务都体验一遍，确保每一份小鱼干都是最美味的，每一个猫抓板都是最舒服的！

没问题！我这就为主人准备一份超级详细的 **“Apifox 乐园探险指南”**，我们一起来把所有功能都测试一遍吧！♪

---

### 探险前的准备 (´｡• ᵕ •｡\`) ♡

1. **启动我们的乐园**：

   * 先在 `task4/` 目录下运行 `docker-compose up -d`，把我们的 MySQL 数据库小伙伴唤醒。
   * 然后再启动我们的 Go 主程序（比如 `go run .`）。
2. **探险工具**：打开 Apifox！
3. **一个重要约定**：既然主人下达了“所有请求都要用 `multipart/form-data` 小包裹来发送”的指令，那我们就严格遵守这个约定来准备我们的测试数据哦！

---

### 探险第一站：注册一只新的小猫咪！

我们要先创造一个属于自己的新角色！

* **接口地址**: `POST` `http://172.28.172.13:8888/v1/user/register`
* **操作指南**:

  1. 在 Apifox 里，请求方法选 `POST`。
  2. 在 `Body` 标签页下，选择 `multipart/form-data`。
  3. 添加以下两行数据：

| Key        | Value           | Description |
| :--------- | :-------------- | :---------- |
| `username` | `cat_master_01` | 我们新角色的名字！   |
| `password` | `meowmeow123`   | 我们的秘密登录暗号！  |

* **预期结果**:

  * 你会收到一个 `code: 0` 和 `msg: "Success"` 的成功响应！
  * **小挑战**：如果你再点一次发送，会发生什么呢？没错！会收到 `code: -1` 和 `msg: "User already exists"`，说明我们的重复注册防护做得很好！

### 探险第二站：用新身份登录乐园！

现在，用我们刚刚注册好的新身份，去获取进入乐园的“魔法通行证”（Tokens）！

* **接口地址**: `POST` `http://172.28.172.13:8888/v1/user/login`
* **操作指南**:

  1. 请求方法还是 `POST`。
  2. Body 还是选择 `multipart/form-data`。
  3. 添加的数据和注册时一模一样：

| Key        | Value           |
| :--------- | :-------------- |
| `username` | `cat_master_01` |
| `password` | `meowmeow123`   |

* **预期结果**:

  * 你会收到一个 `code: 0` 的成功响应，Body 里还有你的用户信息！
  * **最重要的宝藏**：点开响应的 **Headers** 标签页！你会看到两张闪闪发光的通行证：`Access-Token` 和 `Refresh-Token`！
  * **✨ 快把 `Access-Token` 后面那一长串的值完整地复制下来！✨** 我们接下来的所有探险都需要它！

### 探险第三站：查看自己的信息！

带着我们的魔法通行证，去看看我们自己的房间布置得怎么样了！

* **接口地址**: `GET` `http://172.28.172.13:8888/v1/user/info`
* **操作指南**:

  1. 请求方法选 `GET`。
  2. **关键一步**：切换到 `Headers` 标签页，添加一个新的请求头：

| Key            | Value                |
| :------------- | :------------------- |
| `Access-Token` | (粘贴你刚刚从登录接口复制的那一长串值) |

```
3.  因为是查看自己的信息，所以 `Body` 里什么都不用填哦！
```

* **预期结果**:

  * 你会收到 \`code: 0`code: 0` 的成功响应，`data` 里面是你完整的个人信息，包括那个正确的默认头像URL！

### 探险第四站：换一个全新的头像！

默认头像虽然可爱，但我们想换一个自己最喜欢的！

* **接口地址**: `PUT` \`[http://1](https://www.google.com/search?q=http://1)`http://172.28.172.13:8888/v1/user/avatar/upload`

* \*\*操作**操作指南**:

  1. 请求方法选 `PUT`。
  2. 和第三站一样，\*\*先把 `Access-Token` 添加**先把 `Access-Token` 添加到 `Headers` 里！** 这是我们的通行证！
  3. 切换到 `Body` 标签页，选择 \`multipart/form-data`multipart/form-data`。
  4. 添加一行数据，**这一步要特别小心哦**：

     * 参数名 (Key) 填 \`data`data`。
     * 然后看右边，把类型从默认的 `Text` **改成 `File`** 哦！
     * 点击

* **操作指南**:

  1. 请求方法选 `PUT`。
  2. 和第三站一样，**先把 `Access-Token` 添加到 `Headers` 里！** 这是我们的通行证！
  3. 切换到 `Body` 标签页，选择 `multipart/form-data`。
  4. 添加一行数据，**这一步要特别小心哦**：

     * 参数名 (Key) 填 `data`。
     * 然后看右边，把类型从默认的 `Text` **改成 `File`** 哦！
     * 点击“选择文件”，从你的电脑里选一张你喜欢的图片（`.jpg` 或 `.png`）。

* **预期结果**:

  * 你会收到 `code: 0` 的成功响应，并且 `data` 里的 `avatar_url` 已经变成了一个全新的、指向我们自己服务器的地址，比如 `http://172.28.172.13:8888/static/avatars/xxxx.jpg`！
  * 你可以复制这个新 URL 到浏览器里，看看是不是真的能看到你上传的图片！

---

### 小猫咪的探险小贴士 (´,,•ω•,,)♡

主人，每次都手动复制粘贴 `Access-Token` 是不是有点小麻烦？Apifox 有一个超级方便的 **“环境变量”** 和 **“后执行脚本”** 功能！

你可以在 **登录接口** 的 \*\*“后执行\*\*“后执行脚本”\*\* 里，加上一行小小的魔法代码，让 Apifox 自动把 `Access-Token` 存起来。然后，在其他接口的 `Headers` 里，直接填 `{{access_token}}` 就好啦！

这样设置一次之后，每次测试时，只需要先登录一下，后续所有接口就都能自动带上最新的通行证了！这才是真正的“自动化探险”呢！

主人你真的太棒了！现在你已经拥有了完整的测试蓝图，快去你的 Apifox 里开始这场激动人心的乐园探险吧！如果遇到任何小怪兽（bug），随时都可以再来找我哦！加油喵！(๑•̀ㅂ•́)و✧
